* ğŸ‘‹ Hi, Iâ€™m liubo
* ğŸ‘€ Iâ€™m interested in harmony
* ğŸŒ± Iâ€™m currently learning harmony
* ğŸ’ï¸ Iâ€™m looking to collaborate on ...
* ğŸ“« How to reach me ...
* ğŸ“‡ sssssdsdsdsdsdsdasd
* ğŸƒ dsdsdsdsdsddfsgdgasd
* ğŸº jyukyuiyuiyuigkasd
* ğŸ¥ fsdfgdsgsdgdgadsa
* âœ¨ xcvxcvxcvxcvdasdaasd
* ğŸ° dazdsxasxsaxsaasdsa



# C++æ—¶é—´å¤„ç†01--åŸºæœ¬æ–¹æ³•
ç³»ç»Ÿç¯å¢ƒï¼šubuntu20.04

åº“æ–‡ä»¶ä¸­åŒ…å«äº†C++å¯¹æ—¶é—´å¤„ç†çš„åŸºæœ¬æ–¹æ³•ï¼Œæœ¬æ–‡ä»‹ç»äº†time.hæ–‡ä»¶ä¸­å¤„ç†æ—¶é—´çš„ç›¸å…³æ–¹æ³•ã€‚



## ä¸€ã€æ—¶é—´ç±»å‹

C++ä¸­å¸¸ç”¨æ—¶é—´ç±»å‹æœ‰å››ç§ï¼štime_tã€struct tmã€struct timevalã€struct timespec

### 1.1ã€time_t

å¤´æ–‡ä»¶ï¼š

```c++
#include <time.h>
```

ç±»å‹å®šä¹‰ï¼š

```c++
typedef __time32_t time_t;
```

time_tåœ¨ sys/types.h ä¸­å®šä¹‰ï¼Œtime.håŒ…å«äº† sys/types.h 

å˜é‡ç±»å‹ time_tï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªé•¿æ•´å‹ï¼ˆlong intï¼‰ï¼Œç”¨äºè¡¨ç¤ºä»ç‰¹å®šå‚è€ƒç‚¹ï¼ˆé€šå¸¸æ˜¯ 1970å¹´1æœˆ1æ—¥00:00:00 UTC(coordinated universal time)ï¼‰ç»è¿‡çš„ç§’æ•°ã€‚è¢«å¹¿æ³›ç”¨ä½œæ—¶é—´æˆ³ã€‚

ç”±äºtime_tç±»å‹é•¿åº¦çš„é™åˆ¶ï¼Œå®ƒæ‰€è¡¨ç¤ºçš„æ—¶é—´ä¸èƒ½æ™šäº2038å¹´1æœˆ19æ—¥03æ—¶14åˆ†07ç§’(UTC)ã€‚ä¸ºäº†èƒ½å¤Ÿè¡¨ç¤ºæ›´ä¹…è¿œçš„æ—¶é—´ï¼Œå¯ç”¨64ä½æˆ–æ›´é•¿çš„æ•´å½¢æ•°æ¥ä¿å­˜æ—¥å†æ—¶é—´ã€‚

UTCæ—¶é—´æœ‰æ—¶ä¹Ÿç§°ä¸ºGMTæ—¶é—´ï¼Œå®ƒä»¬éƒ½æ˜¯æŒ‡æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ï¼Œåªä¸è¿‡UTCçš„ç§°å‘¼æ›´ä¸ºæ­£å¼ä¸€ç‚¹ã€‚ä¸¤è€…åŒºåˆ«åœ¨äºå‰è€…æ˜¯å¤©æ–‡ä¸Šçš„æ¦‚å¿µï¼Œè€Œåè€…æ˜¯åŸºäºä¸€ä¸ªåŸå­é’Ÿã€‚



### 1.2ã€struct tm

å¤´æ–‡ä»¶ï¼š

```c++
#include <time.h>
```

ç±»å‹å®šä¹‰ï¼š

```c++
struct tm
{ 
    int  tm_sec;  	/* Seconds: 0-60 (to accommodate leap seconds) */
    int  tm_min;  	/* Minutes: 0-59 */
    int  tm_hour; 	/* Hours since midnight: 0-23 */
    int  tm_mday; 	/* Day of the month: 1-31 */
    int  tm_mon;  	/* Months *since* January: 0-11 */
    int  tm_year; 	/* Years since 1900 */
    int  tm_wday; 	/* Days since Sunday (0-6) */
    int  tm_yday; 	/* Days since Jan. 1: 0-365 */
    int  tm_isdst;	/* +1=Daylight Savings Time, 0=No DST, -1=unknown */
};

// ä¸­æ–‡æ³¨é‡Šç‰ˆ
struct tm
{
    int tm_sec;   /*ç§’ - å–å€¼åŒºé—´ä¸º[0, 59]*/
    int tm_min;   /*åˆ† - å–å€¼åŒºé—´ä¸º[0, 59]*/
    int tm_hour;  /*æ—¶ - å–å€¼åŒºé—´ä¸º[0, 23]*/
    int tm_mday;  /*æ—¥ - å–å€¼åŒºé—´ä¸º[1, 31]*/
    int tm_mon;   /*æœˆä»½ - å–å€¼åŒºé—´ä¸º[0, 11]*/
    int tm_year;  /*å¹´ä»½ - å…¶å€¼ä¸º1900å¹´è‡³ä»Šå¹´æ•°*/
    int tm_wday;  /*æ˜ŸæœŸ - å–å€¼åŒºé—´[0, 6]ï¼Œ0ä»£è¡¨æ˜ŸæœŸå¤©ï¼Œ1ä»£è¡¨æ˜ŸæœŸ1ï¼Œä»¥æ­¤ç±»æ¨*/
    int tm_yday;  /*ä»æ¯å¹´çš„1æœˆ1æ—¥å¼€å§‹çš„å¤©æ•°-å–å€¼åŒºé—´ä¸º[0, 365]ï¼Œ0ä»£è¡¨1æœˆ1æ—¥*/
    int tm_isdst; /*å¤ä»¤æ—¶æ ‡è¯†ç¬¦ï¼Œ+1:ä½¿ç”¨å¤ä»¤æ—¶ï¼Œ0:ä¸ä½¿ç”¨å¤ä»¤æ—¶ï¼Œ-1:ä¸äº†è§£æƒ…å†µæ—¶*/
};

```

ç”¨tmç»“æ„ä½“ï¼Œå¯è‡ªå·±æ”¹å˜æ ¼å¼



### 1.3ã€struct timeval

å¤´æ–‡ä»¶ï¼š

```c++
#include <time.h>
```

ç±»å‹å®šä¹‰ï¼š

```c++
struct timeval
{ 
  long tv_sec;		/* whole number of seconds in interval ç§’*/
  long tv_usec; 	/* additional fraction as microseconds å¾®å¦™*/
};
```



### 1.4ã€struct timespec

å¤´æ–‡ä»¶ï¼š

```c++
#include <time.h>
```

ç±»å‹å®šä¹‰ï¼š

```c++
struct timespec
{ 
  __time64_t  tv_sec;	/* seconds; accept 32 or 64 bits ç§’*/
  __int32  	  tv_nsec;	/* nanoseconds çº³ç§’*/
};
```



## äºŒã€æ—¶é—´å‡½æ•°

C++ä¸­å¸¸ç”¨æ—¶é—´å‡½æ•°æœ‰ï¼štime()ã€ctime()ã€localtime()ã€gmtime()ã€mktime()ã€asctime()ã€difftime()ã€gettimeofday()ã€settimeofday()

### 2.1ã€å‡½æ•°time()

å¤´æ–‡ä»¶ï¼š

```c++
#include <time.h>
```

å‡½æ•°å®šä¹‰:

```c++
time_t time(time_t *timer);
```

åŠŸèƒ½æè¿°:

è¯¥å‡½æ•°è¿”å›ä»1970å¹´1æœˆ1æ—¥00æ—¶00åˆ†00ç§’è‡³ä»Šæ‰€ç»è¿‡çš„ç§’æ•°ã€‚å¦‚æœtime_t *timeréç©ºæŒ‡é’ˆï¼Œå‡½æ•°ä¹Ÿä¼šå°†è¿”å›å€¼å­˜åˆ°timeræŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ã€‚



è¿”å›å€¼ï¼š

æˆåŠŸåˆ™è¿”å›ç§’æ•°ï¼Œå¤±è´¥åˆ™è¿”å›((time_t)-1)å€¼ï¼Œé”™è¯¯åŸå› å­˜äºerrnoä¸­ã€‚



ç¤ºä¾‹:

```c++
time_t my_time;
time(&my_time); /*è·å–ä»1970è‡³å½“å‰æ—¶é—´è¿‡äº†å¤šå°‘ç§’ï¼Œå­˜ä¸ºtime_tç±»å‹*/
printf("my_time = %ld \n", my_time);
```

ç»“æœ:

```tex
my_time = 1731036274 
```



### 2.2ã€å‡½æ•°ctime()

å¤´æ–‡ä»¶:

```c++
#include <time.h>
```

å‡½æ•°å®šä¹‰:

```c++
char *ctime(const time_t *timep);

time_t * --> char *
```

åŠŸèƒ½æè¿°ï¼š

å‡½æ•°ctime()å°† time_t ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼çš„æ—¶é—´ï¼Œä¼ å…¥ä¸€ä¸ªtime_tç±»å‹å˜é‡çš„åœ°å€ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦æ•°ç»„æŒ‡é’ˆï¼Œå°†å‚æ•°timepæŒ‡å‘çš„time_tæ—¶é—´ä¿¡æ¯è½¬æ¢æˆå®é™…æ‰€ä½¿ç”¨çš„æ—¶é—´æ—¥æœŸè¡¨ç¤ºæ–¹æ³•ï¼Œå¹¶ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›ã€‚å­—ç¬¦ä¸²æ ¼å¼ä¸ºï¼š"Wed Jun 20 21:00:00 2012\n"ï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥ç›´æ¥æŒ‰å­—ç¬¦ä¸²è¾“å‡ºï¼Œç¼ºç‚¹æ˜¯ä¸èƒ½è‡ªè¡Œæ§åˆ¶è¾“å‡ºæ ¼å¼ã€‚



ç¤ºä¾‹:

```c++
time_t my_time;
time(&my_time);
char* data;
data = ctime(&my_time);
printf("%s", data);  // ç”¨ctimeå°†ç§’æ•°è½¬åŒ–æˆå­—ç¬¦ä¸²æ ¼å¼ï¼Œè¾“å‡ºï¼šFri Nov  8 11:24:34 2024
```

ç»“æœ:

```tex
Fri Nov  8 11:24:34 2024
```



### 2.3ã€å‡½æ•°localtime()

å¤´æ–‡ä»¶:

```c++
#include <time.h>
```

å‡½æ•°å®šä¹‰:

```c++
struct tm* localtime(const time_t *timep);

time_t * --> struct tm*
```

åŠŸèƒ½æè¿°ï¼š

ç”¨äºå°†æ—¶é—´æˆ³ï¼ˆtime_t ç±»å‹ï¼‰è½¬æ¢ä¸ºæœ¬åœ°æ—¶é—´çš„ç»“æ„ä½“(struct tm)ã€‚

å®ƒæ¥å—ä¸€ä¸ªæŒ‡å‘ time_t ç±»å‹çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘ tm ç»“æ„ä½“çš„æŒ‡é’ˆ,è¡¨ç¤ºçš„æœ¬åœ°æ—¶åŒºæ—¶é—´(å¦‚åŒ—äº¬æ—¶é—´= GMT+å°æ—¶)ã€‚

ä¼˜ç‚¹æ˜¯å¯ä»¥è‡ªè¡Œæ§åˆ¶è¾“å‡ºæ ¼å¼ï¼Œç¼ºç‚¹æ˜¯ä¸èƒ½ç›´æ¥å½“ä½œå­—ç¬¦ä¸²è¾“å‡ºï¼Œå¾—ç”¨æŒ‡é’ˆè®¿é—®ç»“æ„ä½“å†…éƒ¨è¾“å‡ºã€‚



ç¤ºä¾‹:

```c++
struct tm* p;
p = localtime(&my_time);  // ç”¨localtimeå°†ç§’æ•°è½¬åŒ–ä¸ºstruct tmç»“æ„ä½“

printf("%d/%d/%d %02d:%02d:%02d\n",
1900 + p->tm_year, 1 + p->tm_mon, p->tm_mday, p->tm_hour, p->tm_min, p->tm_sec);

// è¾“å‡ºæ˜ŸæœŸ
char* wday[] = {"Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"};
printf("%s\n", wday[p->tm_wday]);

```

ç»“æœ:

```tex
2024/11/12 19:42:16
Tuesday
```



### 2.4ã€å‡½æ•°gmtime()

å¤´æ–‡ä»¶:

```c++
#include <time.h>
```

å‡½æ•°å®šä¹‰:

```c++
struct tm* gmtime(const time_t *timep);

time_t * --> struct tm*
```

åŠŸèƒ½æè¿°:

gmtime()ç”¨äºå°†å‚æ•°timepæŒ‡å‘çš„time_tæ—¶é—´ç±»å‹è½¬æ¢ä¸ºè¡¨ç¤ºGMTæ—¶é—´çš„ç»“æ„ä½“ç±»å‹(struct tm)ï¼Œå¹¶ä»¥struct tm*æŒ‡é’ˆè¿”å›ã€‚ä¼˜ç‚¹æ˜¯å¯ä»¥è‡ªè¡Œæ§åˆ¶è¾“å‡ºæ ¼å¼ï¼Œç¼ºç‚¹æ˜¯ä¸èƒ½ç›´æ¥å½“ä½œå­—ç¬¦ä¸²è¾“å‡ºï¼Œå¾—ç”¨æŒ‡é’ˆè®¿é—®ç»“æ„ä½“å†…éƒ¨è¾“å‡ºã€‚å’Œlocaltimeç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯gmtimeä¸åŠ åœ°æ–¹æ—¶,gmtimeæ‰“å°çš„æ—¶é—´ä¸localtimeåœ¨åŒ—äº¬åœ°åŒºæ‰“å°çš„æ—¶é—´æ™š8å°æ—¶ã€‚
GMTï¼šGMTæ˜¯ä¸­å¤®æ—¶åŒº, åŒ—äº¬ åœ¨ä¸œ8åŒº,ç›¸å·®8ä¸ªå°æ—¶ï¼Œæ‰€ä»¥åŒ—äº¬æ—¶é—´=GMTæ—¶é—´+8å°æ—¶ã€‚



ç¤ºä¾‹:

```c++
struct tm* p;
p = gmtime(&my_time);  // ç”¨localtimeå°†ç§’æ•°è½¬åŒ–ä¸ºstruct tmç»“æ„ä½“

printf("%d/%d/%d %02d:%02d:%02d\n",
1900 + p->tm_year, 1 + p->tm_mon, p->tm_mday, p->tm_hour, p->tm_min, p->tm_sec);
```

ç»“æœ:

```tex
2024/11/12 11:42:16
```



### 2.5ã€å‡½æ•°asctime()

å¤´æ–‡ä»¶:

```c++
#include <time.h>
```

å‡½æ•°å®šä¹‰:

```c++
char *asctime(const struct tm *p_tm);

struct tm * --> char *
```

åŠŸèƒ½æè¿°

asctime()å°†struct tmç»“æ„ä½“è½¬åŒ–ä¸ºå­—ç¬¦ä¸²,ä¼ å…¥ä¸€ä¸ªstruct tmç»“æ„ä½“ç±»å‹çš„æŒ‡é’ˆï¼Œè¿”å›ä¸€ä¸ªè¡¨ç¤ºæ—¶é—´æ—¥æœŸå­—ç¬¦æ•°ç»„æŒ‡é’ˆï¼Œå’Œctimeè¾“å‡ºæ ¼å¼ä¸€è‡´ï¼Œå­—ç¬¦ä¸²æ ¼å¼ä¸ºï¼š"Wed Jun 20 21:00:00 2012\n"ã€‚



ç¤ºä¾‹:

```c++
struct tm* p;
p = localtime(&my_time);

char* date2;
date2 = asctime(p);
printf("\nasctime swich\n");
printf("%s", date2);
```

ç»“æœ:

```tex
2024/11/12 11:42:16
```



## ä¸‰ã€å®Œæ•´æµ‹è¯•ç”¨ä¾‹

code

```c++
/*****************************************************************************
 * | @file    : main.c
 * | @author  : liubo
 * | @version : V1.0.0
 * | @date    : 2024-11-12
 * --------------
 * | @brief   : main
 ******************************************************************************/
#include <iostream>  // åŒ…å«è¾“å…¥å’Œè¾“å‡ºæ“ä½œ
#include <stdio.h>   // Cè¯­è¨€çš„æ ‡å‡†åº“ï¼ŒåŒ…å«Cè¯­è¨€æµæ“ä½œ printfç­‰
#include <string.h>  // Cè¯­è¨€çš„æ ‡å‡†åº“ï¼ŒåŒ…å«å­—ç¬¦ä¸²å¤„ç†æ“ä½œ strcpyç­‰

#include <time.h>

using std::cin;
using std::cout;
using std::endl;

int main()
{
    printf("----------------begain------------------\n");

    time_t my_time;
    time(&my_time); /*è·å–ä»1970è‡³å½“å‰æ—¶é—´è¿‡äº†å¤šå°‘ç§’ï¼Œå­˜ä¸ºtime_tç±»å‹*/
    printf("my_time = %ld \n", my_time);

    char* date1;
    date1 = ctime(&my_time);  // å°†ç§’æ•°è½¬åŒ–æˆå­—ç¬¦ä¸²æ ¼å¼ï¼Œè¾“å‡ºï¼šFri Nov  8 11:24:34 2024
    printf("\nctime swich time_t to char*\n");
    printf("%s", date1);

    struct tm* p;
    p = localtime(&my_time);  // ç”¨localtimeå°†ç§’æ•°è½¬åŒ–ä¸ºstruct tmç»“æ„ä½“
    printf("\nlocaltime swich time_t to struct tm\n");
    printf("%d/%d/%d %02d:%02d:%02d\n",
    1900 + p->tm_year, 1 + p->tm_mon, p->tm_mday, p->tm_hour, p->tm_min, p->tm_sec);  // 2024/11/8 11:24:34

    struct tm* p1;
    p1 = gmtime(&my_time);
    printf("\ngmtime swich time_t to struct tm\n");
    printf("%d/%d/%d %02d:%02d:%02d\n",
    1900 + p1->tm_year, 1 + p1->tm_mon, p1->tm_mday, p1->tm_hour, p1->tm_min, p1->tm_sec);

    // è¾“å‡ºæ˜ŸæœŸ
    char* wday[] = {"Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"};
    printf("%s\n", wday[p->tm_wday]);

    char* date2;
    date2 = asctime(p);  // å°†struct tmè½¬åŒ–æˆå­—ç¬¦ä¸²æ ¼å¼å’Œctimeè¾“å‡ºæ ¼å¼ä¸€è‡´ï¼Œè¾“å‡ºï¼šFri Nov  8 11:24:34 2024
    printf("\nasctime swich struct tm to char*\n");
    printf("%s", date2);

    printf("-----------------end-------------------\n");
    // getchar();
    return EXIT_SUCCESS;
}

/*****************************************************************************
 * end of file
 ******************************************************************************/

```



ç»“æœ:

```tex
----------------begain------------------
my_time = 1731595688 

ctime swich time_t to char*
Thu Nov 14 22:48:08 2024

localtime swich time_t to struct tm
2024/11/14 22:48:08

gmtime swich time_t to struct tm
2024/11/14 14:48:08
Thursday

asctime swich struct tm to char*
Thu Nov 14 14:48:08 2024
-----------------end-------------------
```




## å››ã€æ€»ç»“

ä»¥ä¸Šå°±æ˜¯ä»Šå¤©è¦è®²çš„å†…å®¹



## äº”ã€å‚è€ƒèµ„æ–™

ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡å‚è€ƒäº†å…¶ä»–èµ„æ–™å’ŒCSDNåšä¸»çš„æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œç°é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
ä¸€ã€https://blog.csdn.net/weixin_44032878/article/details/87939039

äºŒã€https://blog.csdn.net/water_cow/article/details/7521567



---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
---
